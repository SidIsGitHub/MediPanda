<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Cache-Control" content="max-age=31536000">
    <title>MediPanda</title>
    <link rel="preconnect" href="https://api.mapbox.com">
    <link rel="preconnect" href="https://events.mapbox.com">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.tailwindcss.com">
        const deviceId = "user_" + Math.random().toString(36).substr(2, 9);
        // Generate a unique ID for this phone
        if (!deviceId) {
            deviceId = "user_" + Math.random().toString(36).substr(2, 9);
            localStorage.setItem("paws_device_id", deviceId);
        }
        console.log("My User ID:", deviceId);
    </script>

    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">



</head>

<body class="h-[100dvh] flex flex-col overflow-hidden bg-[#121212]">
    <div id="auth-screen" class="fixed inset-0 z-[100] bg-[#050505] overflow-y-auto transition-all duration-500">

        <div class="fixed inset-0 auth-bg-gradient z-0 opacity-60 pointer-events-none"></div>

        <img src="assets/panda-paw.svg" decoding="async"
            class="fixed -bottom-40 -right-40 w-[180vw] max-w-[1000px] opacity-[0.03] rotate-[25deg] z-0 pointer-events-none select-none"
            alt="Background Decoration">

        <div class="min-h-full w-full flex flex-col items-center justify-center py-12 px-6 relative z-10">

            <div class="text-center mb-8 w-full max-w-sm">
                <div class="relative mx-auto w-40 h-40 mb-2 flex items-center justify-center">
                    <div class="absolute inset-0 bg-pink-500 blur-[60px] opacity-20 rounded-full"></div>
                    <img src="assets/panda-paw.svg"
                        class="relative w-full h-full drop-shadow-[0_10px_10px_rgba(0,0,0,0.5)] object-contain"
                        alt="MediPanda Logo">
                </div>

                <h1 class="text-4xl font-extrabold text-white tracking-tight mb-2 drop-shadow-md">MediPanda</h1>
                <p class="text-pink-200/60 font-medium tracking-wide text-sm">Your Health. Simplified.</p>
            </div>

            <div class="w-full max-w-sm glass-panel rounded-[32px] p-1 border border-white/10 shadow-2xl relative">

                <div class="flex bg-black/20 p-1 m-4 rounded-2xl backdrop-blur-md">
                    <button onclick="toggleAuthMode('login')" id="tab-login"
                        class="flex-1 py-3 text-sm font-bold rounded-xl bg-white/10 text-white shadow-sm transition-all border border-white/5">Log
                        In</button>
                    <button onclick="toggleAuthMode('register')" id="tab-register"
                        class="flex-1 py-3 text-sm font-bold rounded-xl text-zinc-400 hover:text-white transition-all">Sign
                        Up</button>
                </div>

                <div class="px-6 pb-6 space-y-5">

                    <div id="register-avatar" class="hidden flex-col items-center justify-center mb-2 mt-2">
                        <div class="relative group cursor-pointer transition-transform active:scale-95"
                            onclick="document.getElementById('reg-photo-input').click()">
                            <div id="reg-photo-preview"
                                class="w-28 h-28 rounded-full bg-black/40 border-2 border-white/10 overflow-hidden flex items-center justify-center object-cover shadow-inner backdrop-blur-sm">
                                <i
                                    class="fa-solid fa-camera text-2xl text-white/50 group-hover:text-white transition"></i>
                            </div>
                            <div
                                class="absolute bottom-1 right-1 bg-blue-500 w-8 h-8 rounded-full flex items-center justify-center border-2 border-[#1c1c1e] shadow-lg">
                                <i class="fa-solid fa-plus text-white text-xs"></i>
                            </div>
                        </div>
                        <p class="text-zinc-400 text-xs mt-3 font-medium">Add Profile Photo</p>
                        <input type="file" id="reg-photo-input" accept="image/*" class="hidden"
                            onchange="previewRegPhoto(this)">
                    </div>

                    <div class="space-y-4">
                        <div class="group">
                            <label
                                class="text-[10px] font-bold text-zinc-400 uppercase ml-3 mb-1 block tracking-wider">Email
                                Address</label>
                            <input type="email" id="auth-email"
                                class="w-full bg-black/30 text-white p-4 rounded-2xl border border-white/5 outline-none focus:border-blue-500/50 focus:bg-black/50 transition placeholder-zinc-600 backdrop-blur-sm"
                                placeholder="">
                        </div>
                        <div class="group">
                            <label
                                class="text-[10px] font-bold text-zinc-400 uppercase ml-3 mb-1 block tracking-wider">Password</label>
                            <input type="password" id="auth-password"
                                class="w-full bg-black/30 text-white p-4 rounded-2xl border border-white/5 outline-none focus:border-blue-500/50 focus:bg-black/50 transition placeholder-zinc-600 backdrop-blur-sm"
                                placeholder="">
                        </div>
                    </div>

                    <div id="register-fields" class="hidden space-y-4 pt-4 border-t border-white/10 mt-2">

                        <div class="flex gap-3">
                            <div class="flex-1">
                                <label class="text-[10px] font-bold text-zinc-400 uppercase ml-3 mb-1 block">First
                                    Name</label>
                                <input type="text" id="reg-firstname"
                                    class="w-full bg-black/30 text-white p-4 rounded-2xl border border-white/5 outline-none focus:border-blue-500/50"
                                    placeholder="">
                            </div>
                            <div class="flex-1">
                                <label class="text-[10px] font-bold text-zinc-400 uppercase ml-3 mb-1 block">Last
                                    Name</label>
                                <input type="text" id="reg-lastname"
                                    class="w-full bg-black/30 text-white p-4 rounded-2xl border border-white/5 outline-none focus:border-blue-500/50"
                                    placeholder="">
                            </div>
                        </div>

                        <div class="flex gap-3">
                            <div class="flex-1">
                                <label class="text-[10px] font-bold text-zinc-400 uppercase ml-3 mb-1 block">Age</label>
                                <input type="number" id="reg-age"
                                    class="w-full bg-black/30 text-white p-4 rounded-2xl border border-white/5 outline-none focus:border-blue-500/50"
                                    placeholder="">
                            </div>
                            <div class="flex-1">
                                <label
                                    class="text-[10px] font-bold text-zinc-400 uppercase ml-3 mb-1 block">Blood</label>
                                <div class="relative">
                                    <select id="reg-blood"
                                        class="w-full bg-black/30 text-white p-4 rounded-2xl border border-white/5 outline-none appearance-none focus:border-blue-500/50">
                                        <option value="Unknown" class="bg-zinc-900">Select</option>
                                        <option value="A+" class="bg-zinc-900">A+</option>
                                        <option value="O+" class="bg-zinc-900">O+</option>
                                        <option value="B+" class="bg-zinc-900">B+</option>
                                        <option value="AB+" class="bg-zinc-900">AB+</option>
                                        <option value="A-" class="bg-zinc-900">A-</option>
                                        <option value="O-" class="bg-zinc-900">O-</option>
                                    </select>
                                    <i
                                        class="fa-solid fa-chevron-down absolute right-4 top-1/2 -translate-y-1/2 text-xs text-zinc-500 pointer-events-none"></i>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label class="text-[10px] font-bold text-zinc-400 uppercase ml-3 mb-1 block">Dietary
                                Goal</label>
                            <div class="relative">
                                <select id="reg-goal"
                                    class="w-full bg-black/30 text-white p-4 rounded-2xl border border-white/5 outline-none appearance-none focus:border-blue-500/50">
                                    <option value="Maintain" class="bg-zinc-900">Maintain Weight</option>
                                    <option value="Weight Loss" class="bg-zinc-900">Weight Loss</option>
                                    <option value="Aggressive Weight Loss" class="bg-zinc-900">Aggressive Weight Loss
                                    </option>
                                    <option value="Weight Gain" class="bg-zinc-900">Weight Gain</option>
                                    <option value="Aggressive Weight Gain" class="bg-zinc-900">Aggressive Weight Gain
                                    </option>
                                </select>
                                <div
                                    class="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-zinc-500">
                                    <i class="fa-solid fa-chevron-down text-xs"></i>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label
                                class="text-[10px] font-bold text-zinc-400 uppercase ml-3 mb-1 block">Location</label>
                            <div class="relative flex items-center">
                                <input type="text" id="reg-location"
                                    class="w-full bg-black/30 text-white p-4 pr-12 rounded-2xl border border-white/5 outline-none focus:border-blue-500/50"
                                    placeholder="Detecting..." readonly>
                                <button onclick="detectUserLocation()"
                                    class="absolute right-2 top-2 bottom-2 bg-white/10 hover:bg-white/20 text-blue-400 w-10 rounded-xl flex items-center justify-center transition-all border border-white/5 shadow-sm active:scale-90">
                                    <i class="fa-solid fa-location-crosshairs"></i>
                                </button>
                            </div>
                        </div>

                        <div class="relative">
                            <label class="text-[10px] font-bold text-zinc-400 uppercase ml-3 mb-1 block">Chronic
                                Conditions</label>
                            <div class="w-full bg-black/30 min-h-[60px] p-2 rounded-2xl border border-white/5 focus-within:border-blue-500/50 transition flex flex-wrap gap-2 cursor-text"
                                onclick="document.getElementById('condition-search').focus()">
                                <div id="conditions-container" class="contents"></div>
                                <input type="text" id="condition-search"
                                    class="bg-transparent text-white outline-none flex-1 min-w-[100px] p-2 placeholder-zinc-600 text-sm"
                                    placeholder="Search..." autocomplete="off">
                            </div>
                            <div id="suggestions-box"
                                class="hidden absolute top-full left-0 w-full bg-[#1c1c1e] border border-white/10 rounded-xl mt-2 overflow-hidden shadow-2xl max-h-40 overflow-y-auto z-[101]">
                            </div>
                        </div>
                    </div>

                    <div class="pt-4 pb-2">
                        <button onclick="handleAuth()" id="auth-action-btn"
                            class="w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-bold py-4 rounded-2xl shadow-lg shadow-blue-900/20 active:scale-95 transition-all text-lg tracking-wide">
                            Log In
                        </button>
                        <button onclick="bypassAuth()"
                            class="w-full mt-4 py-2 text-zinc-500 text-xs font-bold hover:text-white transition uppercase tracking-widest opacity-60 hover:opacity-100">
                            Continue as Guest
                        </button>
                        <p id="auth-error" class="text-red-400 text-xs text-center font-bold mt-3 h-4"></p>
                    </div>
                </div>
            </div>

            <div class="h-10 w-full"></div>
        </div>
    </div>
    </div>
    </div>
    <div id="google-places-service" style="display:none;"></div>
    <button onclick="toggleProfile(true)"
        class="absolute top-6 right-6 z-50 w-14 h-14 bg-zinc-800 rounded-full shadow-xl flex items-center justify-center active:scale-90 transition-transform border border-zinc-700">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg>
    </button>



    <div id="dynamic-island"
        class="absolute top-6 left-1/2 -translate-x-1/2 z-50 bg-black shadow-2xl ios-spring overflow-hidden cursor-pointer group"
        style="width: 200px; height: 64px; border-radius: 9999px;" onclick="expandCamera()">

        <div id="camera-icon" class="absolute inset-0 flex items-center justify-center transition-opacity duration-250">
            <svg xmlns="http://www.w3.org/2000/svg"
                class="h-8 w-8 text-white group-hover:scale-110 transition-transform" fill="none" viewBox="0 0 24 24"
                stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
        </div>

        <div id="camera-view"
            class="absolute inset-0 opacity-0 pointer-events-none transition-opacity duration-500 delay-100 flex flex-col">

            <div class="absolute top-4 right-4 z-20 bg-black/50 rounded-full p-2 backdrop-blur-md"
                onclick="collapseCamera(event)">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-white" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                        clip-rule="evenodd" />
                </svg>
            </div>

            <video id="camera-stream" autoplay playsinline class="w-full h-full object-cover"></video>

            <div class="absolute bottom-6 w-full text-center">
                <p
                    class="text-white font-medium text-sm bg-black/30 backdrop-blur-md inline-block px-4 py-1 rounded-full border border-white/20">
                    Scanning
                </p>
            </div>
        </div>
    </div>

    <input type="file" id="camera-input" accept="image/*" capture="environment" class="hidden">

    <div id="home-screen" class="flex-1 flex flex-col p-6 space-y-6 overflow-y-auto no-scrollbar pb-32">
        <h1 class="text-3xl font-extrabold mt-20 tracking-tight">
            <span id="greeting-text">Good Evening,</span><br>
            <span id="greeting-name" class="text-zinc-400">Guest</span>
        </h1>
        <div class="grid grid-cols-2 gap-4 h-56">
            <div
                class="animated-gradient-1 rounded-3xl p-5 flex flex-col justify-between shadow-lg relative overflow-hidden">
                <i class="fa-solid fa-bolt absolute top-5 right-5 text-2xl opacity-70"></i>
                <div></div>
                <h2 class="text-2xl font-bold relative z-10 leading-tight">Quick<br>Actions</h2>
            </div>
            <div id="care-card" onclick="openMapModal()"
                class="relative rounded-3xl overflow-hidden shadow-lg border border-zinc-800 bg-zinc-900 h-56 cursor-pointer active:scale-95 transition-transform duration-300 group">

                <div id="static-map-preview"
                    class="absolute inset-0 z-0 opacity-60 grayscale group-hover:grayscale-0 transition-all duration-500">
                </div>

                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent z-10"></div>

                <div class="relative z-20 h-full p-5 flex flex-col justify-between">
                    <div></div>
                    <div class="flex flex-col">
                        <h2 class="text-white font-bold text-2xl leading-tight tracking-tight">Care &<br>Connect</h2>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-zinc-900 rounded-3xl p-6 h-48 relative overflow-hidden border border-zinc-800 flex items-center">
            <div class="max-w-[65%] z-10">
                <h3 class="font-bold text-xl mb-2 text-white"><i class="fa-solid fa-paw mr-2"></i>Dr. Paws Tip</h3>
                <p class="text-zinc-400 leading-relaxed">"Bamboo is great, but variety is better! Try adding colorful
                    veggies to your next meal."</p>
            </div>
            <img src="https://cdn-icons-png.flaticon.com/512/3769/3769036.png"
                class="absolute -right-6 -bottom-10 w-48 opacity-90 rotate-12 drop-shadow-2xl" alt="Mascot Peeking">
        </div>
    </div>
    <div id="profile-modal"
        class="hidden fixed inset-0 z-[200] bg-black transition-transform duration-300 translate-x-full overflow-y-auto no-scrollbar">

        <div class="min-h-full flex flex-col relative">

            <div
                class="px-6 pt-12 pb-4 flex justify-between items-center sticky top-0 bg-black/90 backdrop-blur-md z-50 border-b border-white/10">
                <button onclick="toggleProfile(false)"
                    class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center active:scale-90 transition-transform border border-zinc-700">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M15 18L9 12L15 6"></path>
                    </svg>
                </button>
                <h1 class="text-2xl font-extrabold text-white tracking-tight">Medical ID</h1>
                <button onclick="saveAndCloseProfile()" class="text-blue-500 font-bold text-lg">Done</button>
            </div>

            <div class="p-6 pb-40 flex flex-col items-center">

                <div class="relative group cursor-pointer mb-8">
                    <div
                        class="w-28 h-28 rounded-full bg-zinc-800 border-4 border-[#1c1c1e] overflow-hidden flex items-center justify-center shadow-2xl relative">
                        <img id="profile-img-display" class="w-full h-full object-cover hidden" src="" />
                        <i id="profile-icon-display"
                            class="fa-solid fa-user text-4xl text-zinc-500 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"></i>
                    </div>
                    <div
                        class="absolute bottom-1 right-1 bg-blue-600 w-8 h-8 rounded-full flex items-center justify-center border-2 border-black shadow-lg">
                        <i class="fa-solid fa-camera text-xs text-white"></i>
                    </div>
                </div>

                <div class="w-full space-y-6">

                    <div>
                        <h3 class="text-zinc-500 text-xs font-bold uppercase ml-4 mb-2">Basic Info</h3>
                        <div class="bg-[#1c1c1e] rounded-2xl overflow-hidden border border-white/5">
                            <div class="flex items-center justify-between p-4 border-b border-zinc-800">
                                <span class="text-white font-medium">Name</span>
                                <input type="text" id="p-name" placeholder="Your Name"
                                    class="bg-transparent text-right text-zinc-400 outline-none w-1/2 focus:text-blue-500">
                            </div>
                            <div class="flex border-b border-zinc-800">
                                <div class="flex-1 flex items-center justify-between p-4 border-r border-zinc-800">
                                    <span class="text-white font-medium">Age</span>
                                    <input type="number" id="p-age" placeholder="--"
                                        class="bg-transparent text-right text-zinc-400 outline-none w-12 focus:text-blue-500">
                                </div>
                                <div class="flex-1 flex items-center justify-between p-4">
                                    <span class="text-white font-medium">Blood</span>
                                    <select id="p-blood"
                                        class="bg-transparent text-right text-zinc-400 outline-none appearance-none focus:text-blue-500">
                                        <option value="Unknown">--</option>
                                        <option value="A+">A+</option>
                                        <option value="O+">O+</option>
                                        <option value="B+">B+</option>
                                        <option value="AB+">AB+</option>
                                        <option value="A-">A-</option>
                                    </select>
                                </div>
                            </div>
                            <div class="flex items-center justify-between p-4 border-b border-zinc-800">
                                <span class="text-white font-medium">Height (cm)</span>
                                <input type="number" id="p-height" placeholder="--"
                                    class="bg-transparent text-right text-zinc-400 outline-none w-20 focus:text-blue-500">
                            </div>
                            <div class="flex items-center justify-between p-4">
                                <span class="text-white font-medium">Weight (kg)</span>
                                <input type="number" id="p-weight" placeholder="--"
                                    class="bg-transparent text-right text-zinc-400 outline-none w-20 focus:text-blue-500">
                            </div>
                        </div>
                    </div>

                    <div class="relative group">
                        <h3 class="text-zinc-500 text-xs font-bold uppercase ml-4 mb-2">Health Conditions</h3>

                        <div
                            class="bg-[#1c1c1e] p-4 rounded-2xl border border-white/5 flex flex-col gap-3 relative z-50">

                            <div class="relative w-full">
                                <div class="flex items-center gap-3 border-b border-white/10 pb-2">
                                    <i class="fa-solid fa-magnifying-glass text-zinc-500"></i>

                                    <input type="text" id="p-condition-search"
                                        class="flex-1 bg-transparent text-white placeholder-zinc-600 outline-none text-sm h-8"
                                        placeholder="Type condition (e.g. Diabetes)..." autocomplete="off">

                                    <button onclick="document.getElementById('p-condition-search').focus()"
                                        class="bg-blue-600 hover:bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center shadow-lg active:scale-90 transition-transform shrink-0">
                                        <i class="fa-solid fa-plus text-sm"></i>
                                    </button>
                                </div>

                                <div id="p-suggestions-box"
                                    class="hidden absolute top-full left-0 w-full bg-[#2c2c2e] border border-white/20 rounded-b-xl shadow-2xl max-h-60 overflow-y-auto z-[999] mt-1">
                                </div>
                            </div>

                            <div id="p-conditions-container" class="flex flex-wrap gap-2 min-h-[10px]"></div>
                        </div>

                        <p class="text-[10px] text-zinc-600 ml-4 mt-1">Specific conditions help Dr. Paws give accurate
                            safety warnings.</p>
                    </div>

                    <div>
                        <h3 class="text-zinc-500 text-xs font-bold uppercase ml-4 mb-2">Active Medications</h3>
                        <div class="bg-[#1c1c1e] rounded-2xl p-4 border border-white/5">
                            <textarea id="p-meds" rows="3"
                                class="w-full bg-transparent text-white placeholder-zinc-600 outline-none resize-none leading-relaxed"
                                placeholder="Ex: Metformin (Morning), Insulin (Night)..."></textarea>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-zinc-500 text-xs font-bold uppercase ml-4 mb-2">Goals & Location</h3>
                        <div class="bg-[#1c1c1e] rounded-2xl overflow-hidden border border-white/5">
                            <div class="flex items-center justify-between p-4 border-b border-zinc-800">
                                <span class="text-white font-medium">Dietary Goal</span>
                                <input type="text" id="p-goal" placeholder="Lose weight / Gain muscle"
                                    class="bg-transparent text-right text-zinc-400 outline-none w-1/2 focus:text-blue-500">
                            </div>
                            <div class="flex items-center justify-between p-4">
                                <span class="text-white font-medium">Location</span>
                                <input type="text" id="p-location" placeholder="City, Country"
                                    class="bg-transparent text-right text-zinc-400 outline-none w-1/2 focus:text-blue-500">
                            </div>
                        </div>
                    </div>

                    <div class="pt-8 border-t border-zinc-800 mt-4">
                        <button onclick="logout()"
                            class="w-full py-4 bg-[#1c1c1e] border border-zinc-800 text-red-500 font-bold rounded-2xl flex items-center justify-center gap-2 active:scale-95 transition-all group hover:bg-red-900/10 hover:border-red-900/30">
                            <i
                                class="fa-solid fa-right-from-bracket group-hover:-translate-x-1 transition-transform"></i>
                            Log Out
                        </button>
                        <p class="text-center text-zinc-600 text-[10px] mt-6 px-8 leading-relaxed">MediPanda v1.0 â€¢
                            Secure Session</p>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div id="chat-screen" class="hidden fixed inset-0 bg-zinc-950 z-40 flex flex-col h-[100dvh]">
    
    <div id="chat-container" class="flex-1 min-h-0 overflow-y-auto px-4 pt-32 pb-4 space-y-4">
        
        <div class="flex justify-start fade-enter fade-enter-active">
            <div class="bg-zinc-800 text-gray-200 p-3 rounded-2xl rounded-tl-none max-w-[80%] border border-zinc-700 shadow-sm text-sm">
                Hello! I'm Dr. Paws. Ask me anything!
            </div>
        </div>

    </div>

    <div class="w-full bg-zinc-900 border-t border-zinc-800 p-4 pb-8 shrink-0 z-50">
        <div class="flex items-center gap-3">
            <input type="text" id="user-input" 
                   class="flex-1 bg-zinc-800 text-white rounded-full px-5 py-3 outline-none border border-zinc-700 focus:border-blue-500 transition placeholder-zinc-500"
                   placeholder="Ask Dr. Paws..." 
                   onkeypress="if(event.key === 'Enter') sendMessage()">

            <button onclick="sendMessage()" 
                    class="bg-blue-600 text-white w-12 h-12 rounded-full hover:bg-blue-500 transition shadow-lg flex items-center justify-center shrink-0 active:scale-90">
                <i class="fa-solid fa-paper-plane text-sm"></i>
            </button>
        </div>
    </div>
</div>
    </div>


    <button onclick="showScreen('chat')"
        class="fixed bottom-12 right-6 z-50 bg-blue-600 hover:bg-blue-500 text-white px-5 py-3 rounded-full shadow-lg font-bold flex items-center gap-2 transition-transform active:scale-95 border border-blue-400/30">
        <i class="fa-solid fa-comment-medical text-lg"></i>
        <span>Ask AI</span>
    </button>
    <div id="map-modal" class="app-transition opacity-0 pointer-events-none bg-[#09090b]">

        <div id="modal-content" class="w-full h-full relative content-hidden">

            <div
                class="absolute top-0 left-0 w-full p-6 pt-12 z-[1001] flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent pointer-events-none">
                <h2 class="text-2xl font-bold text-white drop-shadow-md pointer-events-auto">Nearby Services</h2>

                <button onclick="closeMapModal()"
                    class="bg-black/50 backdrop-blur-md text-white w-10 h-10 rounded-full flex items-center justify-center border border-white/10 pointer-events-auto active:scale-90 transition shadow-lg group hover:bg-zinc-800">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round"
                        class="group-hover:rotate-90 transition-transform duration-300">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <div id="full-map" class="absolute inset-0 z-0 bg-[#121212]"></div>

            <div class="absolute bottom-8 left-0 w-full px-4 z-[1001] flex justify-center pointer-events-none">
                <div
                    class="bg-zinc-900/90 backdrop-blur-xl border border-white/10 p-3 rounded-3xl shadow-2xl flex gap-3 overflow-x-auto no-scrollbar pointer-events-auto max-w-sm w-full">

                    <button onclick="searchNearby('hospital')"
                        class="flex-1 min-w-[70px] bg-zinc-800/50 hover:bg-zinc-700 text-white py-3 rounded-2xl flex flex-col items-center justify-center gap-1 transition active:scale-95 border border-white/5">
                        <div class="w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center mb-1"><i
                                class="fa-solid fa-hospital text-red-500 text-sm"></i></div>
                        <span class="text-[10px] font-bold text-zinc-300">Hospitals</span>
                    </button>

                    <button onclick="searchNearby('cardiologist')"
                        class="flex-1 min-w-[70px] bg-zinc-800/50 hover:bg-zinc-700 text-white py-3 rounded-2xl flex flex-col items-center justify-center gap-1 transition active:scale-95 border border-white/5">
                        <div class="w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center mb-1"><i
                                class="fa-solid fa-heart-pulse text-blue-500 text-sm"></i></div>
                        <span class="text-[10px] font-bold text-zinc-300">Cardio</span>
                    </button>

                    <button onclick="searchNearby('pharmacy')"
                        class="flex-1 min-w-[70px] bg-zinc-800/50 hover:bg-zinc-700 text-white py-3 rounded-2xl flex flex-col items-center justify-center gap-1 transition active:scale-95 border border-white/5">
                        <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center mb-1"><i
                                class="fa-solid fa-pills text-green-500 text-sm"></i></div>
                        <span class="text-[10px] font-bold text-zinc-300">Meds</span>
                    </button>

                    <button onclick="searchNearby('clinic')"
                        class="flex-1 min-w-[70px] bg-zinc-800/50 hover:bg-zinc-700 text-white py-3 rounded-2xl flex flex-col items-center justify-center gap-1 transition active:scale-95 border border-white/5">
                        <div class="w-8 h-8 rounded-full bg-purple-500/20 flex items-center justify-center mb-1"><i
                                class="fa-solid fa-user-doctor text-purple-500 text-sm"></i></div>
                        <span class="text-[10px] font-bold text-zinc-300">Clinic</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <script src="script.js"></script>
</body>


</html>
